---
display: "Downlevel Iteration"
oneline: "–î–ª—è —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –æ–±'—î–∫—Ç—ñ–≤ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –±—ñ–ª—å—à —Å—É–º—ñ—Å–Ω–∏–π, –∞–ª–µ –±–∞–≥–∞—Ç–æ—Å–ª—ñ–≤–Ω–∏–π JavaScript"
---

Downleveling –∞–±–æ –ø–æ–Ω–∏–∂–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è - —Ü–µ —Ç–µ—Ä–º—ñ–Ω, —è–∫–∏–π TypeScript –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –¥–ª—è —Ç—Ä–∞–Ω—Å–ø—ñ–ª—è—Ü—ñ—ó —É —Å—Ç–∞—Ä—É –≤–µ—Ä—Å—ñ—é JavaScript.
–¶–µ–π –ø—Ä–∞–ø–æ—Ä –Ω–∞–¥–∞—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É –¥–ª—è –±—ñ–ª—å—à —Ç–æ—á–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–æ–≥–æ, —è–∫ —Å—É—á–∞—Å–Ω–∏–π JavaScript —ñ—Ç–µ—Ä—É—î –æ–±'—î–∫—Ç–∏ —É —Å—Ç–∞—Ä–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö JavaScript.

ECMAScript 6 –¥–æ–¥–∞–≤ –∫—ñ–ª—å–∫–∞ –Ω–æ–≤–∏—Ö –ø—Ä–∏–º—ñ—Ç–∏–≤—ñ–≤ —ñ—Ç–µ—Ä–∞—Ü—ñ–π: —Ü–∏–∫–ª `for / of` (`for (el of arr)`), —Ä–æ–∑–±—ñ—Ä –º–∞—Å–∏–≤—É (`[a, ... b]`), —Ä–æ–∑–±—ñ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ (`fn (... args)`) —Ç–∞`Symbol.iterator`.
`--downlevelIteration` –¥–æ–∑–≤–æ–ª—è—î –±—ñ–ª—å—à —Ç–æ—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω—ñ —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –≤ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö ES5, –¥–µ –ø—Ä–∏—Å—É—Ç–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `Symbol.iterator`.

#### –ü—Ä–∏–∫–ª–∞–¥: –∑–º—ñ–Ω–∏ –¥–æ `for / of`

–ë–µ–∑ –ø—Ä–∞–ø–æ—Ä–∞ `downlevelIteration` —Ü–∏–∫–ª `for / of` –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É –æ–±'—î–∫—Ç—ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π —Ü–∏–∫–ª `for`:

```ts twoslash
// @target: ES5
// @showEmit
const str = "Hello!";
for (const s of str) {
  console.log(s);
}
```

This is often what people expect, but it's not 100% compliant with ECMAScript 6 behavior.
Certain strings, such as emoji (üòú), have a `.length` of 2 (or even more!), but should iterate as 1 unit in a `for-of` loop.
See [this blog post by Jonathan New](https://blog.jonnew.com/posts/poo-dot-length-equals-two) for a longer explanation.

–ß–∞—Å—Ç–æ –ª—é–¥–∏ —Å–∞–º–µ —Ü—å–æ–≥–æ —ñ –æ—á—ñ–∫—É—é—Ç—å, –∞–ª–µ —Ü–µ –Ω–µ –Ω–∞ 100% –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ ECMAScript 6.
–î–µ—è–∫—ñ —Ä—è–¥–∫–∏, —Ç–∞–∫—ñ —è–∫ —Å–º–∞–π–ª–∏ (üòú), –º–∞—é—Ç—å `.length` 2 (–∞–±–æ –Ω–∞–≤—ñ—Ç—å –±—ñ–ª—å—à–µ!), –∞–ª–µ –ø–æ–≤–∏–Ω–Ω—ñ –∑'—è–≤–∏—Ç–∏—Å—è –≤ —Ü–∏–∫–ª—ñ `for-of` —è–∫ –æ–¥–Ω–∞ –æ–¥–∏–Ω–∏—Ü—è.
–î–∏–≤. [—Ü–µ–π –¥–æ–ø–∏—Å –≤ –±–ª–æ–∑—ñ –î–∂–æ–Ω–∞—Ç–∞–Ω–∞ –ù—å—é](https://blog.jonnew.com/posts/poo-dot-length-equals-two) –¥–ª—è –±—ñ–ª—å—à –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–æ—è—Å–Ω–µ–Ω–Ω—è.

–ö–æ–ª–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–æ –ø—Ä–∞–ø–æ—Ä `downlevelIteration`, TypeScript –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–æ–ø–æ–º—ñ–∂–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó `Symbol.iterator` (–Ω–∞—Ç–∏–≤–Ω—É —á–∏ –ø–æ–ª—ñ—Ñ—ñ–ª).
–Ø–∫—â–æ —Ü—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥—Å—É—Ç–Ω—è, –≤–∏ –ø–æ–≤–µ—Ä–Ω–µ—Ç–µ—Å—å –¥–æ —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ–Ω–¥–µ–∫—Å—É.

```ts twoslash
// @target: ES5
// @downlevelIteration
// @showEmit
const str = "Hello!";
for (const s of str) {
  console.log(s);
}
```

> > **–ü—Ä–∏–º—ñ—Ç–∫–∞:** —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è `downlevelIteration` –Ω–µ –ø–æ–∫—Ä–∞—â—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü—ñ—ó, —è–∫—â–æ —É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—ñ–π `Symbol.iterator`.

#### –ü—Ä–∏–∫–ª–∞–¥: –∑–º—ñ–Ω–∏ —É —Ä–æ–±–æ—Ç—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ spread –∑ –º–∞—Å–∏–≤–∞–º–∏

–¢–∞–∫ –ø—Ä–∞—Ü—é—î –æ–ø–µ—Ä–∞—Ç–æ—Ä `spread` –∑ –º–∞—Å–∏–≤–∞–º–∏:

```js
// Make a new array who elements are 1 followed by the elements of arr2
const arr = [1, ...arr2];
```

–í–∏—Ö–æ–¥—è—á–∏ –∑ –æ–ø–∏—Å—É, –∑–¥–∞—î—Ç—å—Å—è, —â–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ü–µ–π –∫–æ–¥ –¥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤ ES5 –Ω–µ—Å–∫–ª–∞–¥–Ω–æ:

```js
// The same, right?
const arr = [1].concat(arr2);
```

–û–¥–Ω–∞–∫ —É –¥–µ—è–∫–∏—Ö —Ä—ñ–¥–∫—ñ—Å–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è.
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤ –º–∞—Å–∏–≤—ñ —î "–¥—ñ—Ä–∫–∞", –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —ñ–Ω–¥–µ–∫—Å —Å—Ç–≤–æ—Ä–∏—Ç—å _—Å–≤–æ—é_ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ spread, –∞–ª–µ –Ω–µ –±—É–¥–µ —Ü—å–æ–≥–æ —Ä–æ–±–æ—Ç–∏ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –º–∞—Å–∏–≤—É –∑ `concat`:

```js
// Make an array where the '1' element is missing
let missing = [0, , 1];
let spreaded = [...missing];
let concated = [].concat(missing);

// true
"1" in spreaded;
// false
"1" in concated;
```

–ü–æ–¥—ñ–±–Ω–æ –¥–æ `for / of`, `downlevelIteration` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ `Symbol.iterator` (—è–∫—â–æ –≤—ñ–Ω –ø—Ä–∏—Å—É—Ç–Ω—ñ–π) –¥–ª—è –±—ñ–ª—å—à —Ç–æ—á–Ω–æ–≥–æ —ñ–º—ñ—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ ES 6.
